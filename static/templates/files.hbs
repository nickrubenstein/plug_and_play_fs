{{#*inline "page"}}

<section id="crumbs">
  <h4>Path: 
    {{#each crumbs}}
      {{#if @index }}
      /
      {{/if}}
      <a href="/fs/{{this.0}}/files">{{ this.1 }}</a>
    {{/each}}
    - <a href="/fs/{{folder_path}}">details</a>
  </h4>
</section>
<section id="file-list">
  <ul>
    {{#if entities}}
      {{#each entities}}
        {{#if this.is_folder }}
          <li class="folder"><a href="/fs/{{this.path}}/files">open</a>.... {{ this.name }}</li>
        {{else}}
          <li class="file"><a href="/fs/{{../folder_path}}/files/{{this.name}}">details</a>.. {{ this.name }}</li>
        {{/if}}
      {{/each}}
    {{else}}
      <div>Folder is empty</div>
    {{/if}}
  </ul>
</section>
<section id="upload">
  <h4>Upload File</h4>
  <form action="/fs/{{folder_path}}/files" method="post" enctype="multipart/form-data">
    <input type="file" name="file" multiple>
    <input type="submit">
  </form>
  <h4>Add Folder</h4>
  <form action="/fs/{{folder_path}}" method="post">
    <input type="text" name="folder_name">
    <input type="submit">
  </form>
</section>

{{/inline}}
{{> layout}}
